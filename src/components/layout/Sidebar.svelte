<script lang="ts">
  import { Dialog, DialogOverlay, Transition, TransitionChild } from '@rgossiaux/svelte-headlessui';

  let sidebarOpen = false;
</script>

<div class="hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col">
  <div class="flex grow flex-col gap-y-6 overflow-y-auto bg-csas-600 px-6 py-6">
    <div class="flex shrink-0 items-center">
      <svg class="w-5/12" viewBox="0 0 658 296" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_1339_258)">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M565.06 23.0698C564.99 35.9298 575.27 46.41 587.99 46.41L587.98 46.42C600.71 46.43 611.03 35.9998 611.01 23.1598C610.99 10.5298 600.68 0.199804 588.07 0.179804C575.45 0.139804 565.12 10.4198 565.06 23.0698ZM52.01 61.15C77.24 61.15 85.32 65.1 85.32 74.89V84.87H52.01C33.37 84.87 27.53 92.97 27.53 122.33C27.53 151.69 33.37 159.79 52.01 159.79H85.32V169.77C85.32 179.56 77.22 183.51 52.01 183.51C17.57 183.51 -0.5 165.07 -0.5 122.34C-0.5 79.61 17.57 61.16 52.01 61.16V61.15ZM47.68 55.29C45.42 55.29 44.11 54.73 41.84 52.09L26.03 32.8898C25.28 31.9498 25.28 30.8198 25.28 30.0698H36.2C38.64 30.0698 39.77 30.6298 42.41 32.8898L51.44 40.6098L60.29 32.8898C63.11 30.6298 64.06 30.0698 66.69 30.0698H77.41C77.41 30.8198 77.41 31.9498 76.66 32.8898L60.85 52.09C58.59 54.73 57.28 55.29 54.83 55.29H47.68ZM94.74 72.44C94.74 65.67 97.76 62.09 104.72 62.09H173.23V75.27C173.23 82.04 169.66 85.25 162.51 85.25H122.03V110.29H166.26V131.93H122.03V159.6H174.17V172.78C174.17 179.55 170.59 182.57 163.63 182.57H104.71C97.74 182.57 94.73 179 94.73 172.22V72.44H94.74ZM260.4 74.51C260.4 63.79 246.46 61.15 222.18 61.15H222.17V61.17H222.19C194.14 61.17 181.34 75.28 181.34 93.35C181.34 118.124 201.919 126.981 218.23 134.002C228.94 138.611 237.81 142.429 237.81 149.44C237.81 156.4 232.53 159.79 221.81 159.79H180.96V170.15C180.96 180.49 198.85 183.51 220.49 183.51C254.93 183.51 266.79 167.13 266.79 147.93C266.79 123.334 245.664 114.809 229.212 108.169C218.721 103.935 210.13 100.468 210.13 94.09C210.13 88.06 214.28 84.86 224.82 84.86H260.4V74.51ZM306.87 117.81L341.89 67.17C344.71 62.84 346.22 62.09 349.79 62.09H375.02C375.02 63.78 374.64 65.29 373.33 67.17L334.56 120.44L375.22 177.48C376.16 178.99 376.91 180.87 376.91 182.56H352.81C347.54 182.56 345.84 182.18 342.45 177.1L306.87 127.03V182.56H279.57V72.43C279.57 65.66 282.59 62.08 289.55 62.08H306.86V117.8L306.87 117.81ZM451.24 66.42C450.11 62.27 447.86 61.71 442.96 61.71H417.56C412.67 61.71 410.41 62.27 409.28 66.42L378.41 178.05C378.03 179.93 377.85 181.44 377.85 182.57H399.49C404.39 182.57 405.89 182.39 406.83 178.24L413.6 152.63H446.54L453.31 178.24C454.44 182.38 455.95 182.57 460.84 182.57H482.48C482.48 181.44 482.3 179.74 481.92 178.05L451.24 66.42ZM441.64 131.93H418.11H418.1L429.4 89.96H430.34L441.64 131.93ZM433.92 55.32C436.36 55.32 437.69 55.14 440.13 52.5V52.49H440.11L456.49 34.8001C458 33.1001 458.38 32.3501 458.38 31.4101C458.38 30.6601 457.63 30.1001 456.12 30.1001H445.4C443.14 30.1001 441.82 30.6601 439.56 33.3001L423.75 52.5C423 53.44 423 54.57 423 55.32H433.92ZM517.67 150.19H625.19V135.76H517.88C517.849 135.107 517.836 129.725 517.818 122.514V122.49C517.791 111.278 517.754 95.657 517.62 86.51C517.44 73.68 526.19 61.2 542.74 61.48C572.89 61.98 603.08 61.98 633.24 61.46C646.24 61.23 658.07 70.77 658.06 86.3C658.06 86.8 658.059 87.326 658.058 87.874C658.058 88.39 658.057 88.924 658.055 89.475V89.508V89.542V89.577V89.615C658.053 90.971 658.05 92.423 658.05 93.92H550.43V108.01L658.05 107.99C658.05 108.138 658.05 108.466 658.051 108.952L658.052 110.884V110.913V110.973C658.06 119.711 658.084 144.896 658.05 157.68C658 172.94 648.22 182.53 632.78 182.55H543.05C527.49 182.55 517.75 172.85 517.69 157.3V150.21L517.67 150.19ZM20.478 223.26C31.103 223.26 38.29 223.591 38.29 228.9V232.11H20.36C15.38 232.11 12.38 234.21 12.38 237.31C12.38 241.757 17.635 243.759 23.655 246.052C31.725 249.126 41.17 252.723 41.17 263.44C41.17 272.52 35.3 279.72 18.47 279.72C8.62 279.72 -0.460007 279.72 -0.460007 274.63V270.86H19.48C26.12 270.86 29 268.87 29 264.44C29 260.529 24.009 258.532 18.175 256.198C9.971 252.915 0.100006 248.966 0.100006 238.09C0.100006 228.79 7.629 223.26 20.478 223.26ZM49.04 295.77H60.66V272.85C63.98 276.4 69.18 279.72 75.71 279.72C89.67 279.72 95.98 268.87 95.98 251.49C95.98 234.11 89.66 223.26 75.71 223.26C69.18 223.26 63.98 226.59 60.66 230.24V228.68C60.66 226.01 59.23 223.8 55.13 223.8H49.04V295.77ZM60.66 236.53C63.65 234.2 67.31 232.43 71.63 232.43V232.45C80.6 232.45 83.92 239.09 83.92 251.49C83.92 263.89 80.6 270.42 71.63 270.42C67.3 270.42 63.65 268.64 60.66 266.32V236.53ZM102.62 251.49C102.62 235.99 108.26 223.26 126.97 223.26C145.68 223.26 151.32 235.99 151.32 251.49C151.32 266.99 145.68 279.72 126.97 279.72C108.26 279.72 102.62 266.99 102.62 251.49ZM139.38 251.49C139.38 238.65 136.5 231.56 126.98 231.56C117.46 231.56 114.69 238.65 114.69 251.49C114.69 264.33 117.46 271.42 126.98 271.42C136.5 271.42 139.38 264.44 139.38 251.49ZM168.5 217.5C169.83 218.94 170.61 219.38 172.04 219.38H175.16C176.6 219.38 177.38 218.93 178.7 217.5L188.11 206.65C188.55 206.1 188.55 205.43 188.55 204.99H183.46C182.01 204.99 181.34 205.33 179.8 206.65L173.6 211.85L167.51 206.65C165.95 205.32 165.3 204.99 163.74 204.99H158.64C158.64 205.44 158.64 206.09 159.2 206.65L168.5 217.5ZM160.53 223.8V279.16H172.15V238.75C175.47 236.42 179.57 234.65 188.09 234.65H190.86V226.02C190.86 223.81 188.86 223.25 186.87 223.25C182.45 223.25 176.69 224.91 172.15 230.78C171.93 226.57 170.39 223.8 166.62 223.8H160.53ZM207.15 218.05H195.53V211.63C195.53 208.09 196.86 206.1 200.52 206.1H207.16V218.05H207.15ZM195.53 223.81H202.06C205.72 223.81 207.15 225.8 207.15 229.34V279.17H195.53V223.81ZM233.39 223.81H245.78V232.44H233.38V264.66C233.38 268.98 233.94 270.64 237.7 270.64H245.79V273.52C245.79 278.17 241.8 279.5 235.49 279.5C222.87 279.5 221.76 272.75 221.76 264.67V232.45H214.45V226.03L221.76 223.82L225.97 214.96C227.19 212.64 228.07 211.64 230.18 211.64H233.39V223.81ZM292.28 270.88V273.96C292.28 278.5 286.19 279.72 272.79 279.72C254.19 279.72 248.44 266.99 248.44 251.49C248.44 235.99 254.53 223.26 272.68 223.26C287.3 223.26 294.93 231.67 294.93 244.19C294.93 246.96 294.93 249.07 294.37 254.6H260.48C260.48 266.44 264.91 270.88 274.1 270.88H292.28ZM283.2 246.82C283.31 245.82 283.31 243.83 283.31 242.61C283.31 237.62 281.21 231.53 272.79 231.53C265.05 231.53 260.95 235.96 260.5 246.81H283.2V246.82ZM303.8 279.16H315.42V206.09H308.78C305.12 206.09 303.8 208.08 303.8 211.62V279.16ZM327.6 279.16V223.8H333.69C337.79 223.8 339.22 225.9 339.22 228.57V230.24C343.99 225.25 349.74 223.26 355.5 223.26C367.01 223.26 372.55 230.24 372.55 240.43V279.18H360.93V240.98C360.93 234.89 357.05 232.46 350.85 232.46C346.64 232.46 342.33 234.24 339.23 236.56V279.19H327.61V279.16H327.6ZM415.07 274.39C415.07 277.06 416.61 279.16 420.6 279.16V279.17H426.69V240.64C426.69 229.01 418.61 223.25 404.88 223.25C392.59 223.25 385.95 223.58 385.95 228.89V232.1H403C410.09 232.1 415.07 234.2 415.07 241.18V245.82C397.02 246.6 381.85 250.36 381.85 264.2C381.85 273.61 388.38 279.7 398.9 279.7C404.1 279.7 410.3 277.82 415.07 272.83V274.39ZM394.14 262.54C394.14 256.01 399.9 253.02 415.07 252.8V266.29C412.29 268.74 408.09 270.28 403.99 270.28C398.35 270.28 394.14 268.3 394.14 262.54Z"
            fill="white"
          />
        </g>
      </svg>
    </div>
    <nav class="flex flex-1 flex-col">
      <slot />
    </nav>
  </div>
</div>

<Transition show={sidebarOpen}>
  <Dialog class="relative z-50 lg:hidden" open={sidebarOpen} on:close={() => (sidebarOpen = false)}>
    <DialogOverlay />
    <TransitionChild
      enter="transition-opacity ease-linear duration-300"
      enterFrom="opacity-0"
      enterTo="opacity-100"
      leave="transition-opacity ease-linear duration-300"
      leaveFrom="opacity-100"
      leaveTo="opacity-0"
    >
      <div class="fixed inset-0 bg-gray-900/80" />
    </TransitionChild>

    <div class="fixed inset-0 flex">
      <TransitionChild
        enter="transition ease-in-out duration-300 transform"
        enterFrom="-translate-x-full"
        enterTo="translate-x-0"
        leave="transition ease-in-out duration-300 transform"
        leaveFrom="translate-x-0"
        leaveTo="-translate-x-full"
      >
        <div class="relative mr-16 flex w-full max-w-xs h-full flex-1">
          <TransitionChild
            enter="ease-in-out duration-300"
            enterFrom="opacity-0"
            enterTo="opacity-100"
            leave="ease-in-out duration-300"
            leaveFrom="opacity-100"
            leaveTo="opacity-0"
          >
            <div class="absolute left-full top-0 flex w-16 justify-center pt-5">
              <button type="button" class="-m-2.5 p-2.5" on:click={() => (sidebarOpen = false)}>
                <span class="sr-only">Close sidebar</span>
              </button>
            </div>
          </TransitionChild>
          <div class="flex grow flex-col gap-y-5 overflow-y-auto bg-csas-600 px-6 pb-4">
            <div class="flex h-16 shrink-0 items-center">
              <img
                class="h-8 w-auto"
                src="https://tailwindui.com/img/logos/mark.svg?color=white"
                alt="Your Company"
              />
            </div>
            <nav class="flex flex-1 flex-col">
              <slot />
            </nav>
          </div>
        </div>
      </TransitionChild>
    </div>
  </Dialog>
</Transition>

<div
  class="sticky top-0 z-40 flex items-center gap-x-6 bg-csas-600 px-4 py-4 shadow-sm sm:px-6 lg:hidden"
>
  <button
    type="button"
    class="-m-2.5 p-2.5 text-csas-200 lg:hidden"
    on:click={() => (sidebarOpen = true)}
  >
    <span class="sr-only">Open sidebar</span>
  </button>
  <div class="flex-1 text-sm font-semibold leading-6 text-white">Dashboard</div>
</div>
